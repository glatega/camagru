<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
	<video autoplay="true" id="video"></video>
	<canvas id="canvas"></canvas><br>
	<button onclick="snap();">Take Picture</button><br>
	<table>
		<tr>
			<td>Blur</td>
			<td><input min="0" max="20" value="0" step="1" onchange="applyFilter()" data-filter="blur" data-scale="px" type="range"></td>
		</tr>
		<tr>
			<td>Brightness</td>
			<td><input min="0" max="200" value="100" step="1" onchange="applyFilter()" data-filter="brightness" data-scale="%" type="range"></td>
		</tr>
		<tr>
			<td>Contrast</td>
			<td><input min="0" max="200" value="100" step="1" onchange="applyFilter()" data-filter="contrast" data-scale="%" type="range"></td>
		</tr>
		<tr>
			<td>Grayscale?</td>
			<td><input min="0" max="100" value="0" step="1" onchange="applyFilter()" data-filter="grayscale" data-scale="%" type="range"></td>
		</tr>
		<tr>
			<td>Hue Rotate</td>
			<td><input min="0" max="360" value="0" step="1" onchange="applyFilter()" data-filter="hue-rotate" data-scale="deg" type="range"></td>
		</tr>
		<tr>
			<td>Invert</td>
			<td><input min="0" max="100" value="0" step="1" onchange="applyFilter()" data-filter="invert" data-scale="%" type="range"></td>
		</tr>
		<tr>
			<td>Opacity</td>
			<td><input min="0" max="100" value="100" step="1" onchange="applyFilter()" data-filter="opacity" data-scale="%" type="range"></td>
		</tr>
		<tr>
			<td>Saturate</td>
			<td><input min="1" max="100" value="100" step="1" onchange="applyFilter()" data-filter="saturate" data-scale="%" type="range"></td>
		</tr>
		<tr>
			<td>Sepia</td>
			<td><input min="0" max="100" value="0" step="1" onchange="applyFilter()" data-filter="sepia" data-scale="%" type="range"></td>
		</tr>
	
	</table>
	<script type="text/javascript">
		var video = document.getElementById('video');
		var canvas = document.getElementById('canvas');
		var context = canvas.getContext('2d');

		navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
		navigator.mozGetUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia;

		if (navigator.getUserMedia){
			navigator.getUserMedia({video:true}, streamWebCam, throwError);
		}

		function streamWebCam(stream){
			video.src = window.URL.createObjectURL(stream);
			video.play();
		}

		function throwError(e){
			alert(e.name);
		}

		function snap(){
			canvas.width = video.clientWidth;
			canvas.height = video.clientHeight;
			context.drawImage(video, 0, 0);
		}
		var image = document.querySelector('canvas');
		var filterControls = document.querySelectorAll('input[type=range]');
		function applyFilter() {
			var computedFilters = '';
			filterControls.forEach(function(item, index) {
				computedFilters += item.getAttribute('data-filter') + '(' + item.value + item.getAttribute('data-scale') + ') ';
			});
			image.style.filter = computedFilters;
		};
	</script>
</body>
</html>
